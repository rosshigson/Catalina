#!/bin/bash
#set -x
#
if [[ ! -e $1 ]]; then
   echo ""
   echo "ERROR: invalid destination specified !"
   echo ""
   echo "usage: copy_all X:"
   echo ""
   echo "   where X: is the drive you use to read/write SD cards"
   echo ""
   echo "or:    copy_all dir/"
   echo ""        
   echo "   where dir is the directory you want to copy to"
   echo ""
   exit
fi

cp catalina.lua "$1/bin/catalina.lua"
cp cat_env.lua "$1/bin/cat_env.lua"
cp source/lcc/build/cpp.bin "$1/bin/"
cp source/lcc/build/spp.bin "$1/bin/"
cp source/lcc/build/rcc.bin "$1/bin/"
cp source/catalina/bcc.bin  "$1/bin/"
cp source/catalina/binstats.bin  "$1/bin/"
cp source/catalina/binbuild.bin  "$1/bin/"
cp source/catalina/pstrip.bin  "$1/bin/"
cp source/catalina/spinc.bin  "$1/bin/"
cp source/p2asm_src/p2asm.bin "$1/bin/"
cp -R include "$1"
cp -R target "$1"
# note that we do not copy the versions of the library built
# specifically for Catalina, since they are built to use PSRAM.
cp -R "$LCCDIR/lib/p2/lmm" "$1/lib/p2"
cp -R "$LCCDIR/lib/p2/cmm" "$1/lib/p2"
cp -R "$LCCDIR/lib/p2/nmm" "$1/lib/p2"
cp -R "$LCCDIR/lib/p2/xmm" "$1/lib/p2"
cp CATALINA.TXT "$1/CATALINA.TXT"
cp pintest.c "$1/pintest.c"
cp station.c "$1/station.c"
cp intrrpt.c "$1/intrrpt.c"
cp psram.c "$1/psram.c"
cp "$LCCDIR"/demos/hello_world.c "$1/hello.c"
cp "$LCCDIR"/demos/my_func.c "$1/my_func.c"
cp "$LCCDIR"/demos/my_prog.c "$1/my_prog.c"
cp "$LCCDIR"/demos/multithread/dining_philosophers.c "$1/diners.c"
cp "$LCCDIR"/demos/games/othello.c "$1/othello.c"
cp "$LCCDIR"/demos/games/startrek.c "$1/startrek.c"
cp "$LCCDIR"/demos/games/chimaera.h "$1/chimaera.h"
cp "$LCCDIR"/demos/games/chimaera.c "$1/chimaera.c"
cp "$LCCDIR"/demos/lua/lhello.c "$1/lhello.c"
cp "$LCCDIR"/demos/lua/linit.c "$1/linit.c"
